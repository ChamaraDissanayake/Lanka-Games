(self.webpackChunkLanka_Games=self.webpackChunkLanka_Games||[]).push([[2913],{2913:(t,i,e)=>{"use strict";e.r(i),e.d(i,{ModalNumericPageModule:()=>b});var n=e(8583),o=e(665),s=e(7823),r=e(1348),a=e(4762),l=e(1841),u=e(522),c=e(8720),h=e(5921);const d=["inputValue"];function p(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"div",17),c.TgZ(1,"img",18),c.NdJ("click",function(){c.CHM(t);const i=c.oxw();return i.showImage(i.questionImageUrl)}),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(1),c.Q6J("src",t.questionImageUrl,c.LSH)}}function g(t,i){if(1&t&&(c.TgZ(0,"ion-card",19),c.TgZ(1,"video",20),c._UZ(2,"source",21),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.s9C("poster",t.questionVideoThumbnail,c.LSH),c.xp6(1),c.Q6J("src",t.questionVideoUrl,c.LSH)}}function m(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",22),c.NdJ("click",function(){return c.CHM(t),c.oxw().next()}),c._uU(1,"Next"),c.qZA()}if(2&t){c.oxw();const t=c.MAs(19);c.Q6J("disabled",""==t.value)}}const f=[{path:"",component:(()=>{class t{constructor(t,i,e,n,o){this.modalController=t,this.router=i,this.service=e,this.alertController=n,this.http=o,this.container=[],this.arrayContainer=[],this.questionId="",this.questionNo="",this.question="",this.questionImageUrl="",this.questionVideoThumbnail="",this.questionVideoUrl="",this.continue=!1,this.time=30}ngOnInit(){}ionViewWillEnter(){this.getQuestions()}ionViewWillLeave(){clearInterval(this.interval),this.imageModal&&this.imageModal.dismiss()}showImage(t){return(0,a.mG)(this,void 0,void 0,function*(){this.imageModal=yield this.modalController.create({component:u.Q,cssClass:"custom-modal",backdropDismiss:!1,componentProps:{url:t}}),yield this.imageModal.present()})}closeModal(){return(0,a.mG)(this,void 0,void 0,function*(){this.continue=!1,this.submitAnswer(),this.router.navigateByUrl("/home",{replaceUrl:!0})})}next(){this.continue=!0,this.submitAnswer()}submitAnswer(){let t=new l.WM({"Content-Type":"application/json"});this.http.post(this.service.baseURL+"prediction/saveQuestion",JSON.stringify({user_id:this.service.userId,question_id:this.questionId,answer:this.inputValue.value}),t).subscribe(t=>{console.log("submitAnswer",t),this.continue&&this.showQuestions()},t=>{console.log("Something went wrong!",t)})}getQuestions(){console.log(this.service.gameCategoryId,this.service.userId);let t=new l.WM({"Content-Type":"application/json"});this.http.post(this.service.baseURL+"prediction/getQuestion",JSON.stringify({game_category_id:this.service.gameCategoryId,user_id:this.service.userId}),t).subscribe(t=>{console.log("getQuestions",t),t.length?(this.arrayContainer=t,this.showQuestions()):this.alertEmpty()},t=>{console.log("Something went wrong!",t)})}showQuestions(){this.arrayContainer.length?(this.container=this.arrayContainer.shift(),console.log("Show questions",this.container),this.questionId=this.container.questionId,this.questionNo=this.container.questionNo,this.question=this.container.question,this.questionImageUrl=this.container.questionImageUrl,this.questionVideoThumbnail=this.container.questionVideoThumbnail,this.questionVideoUrl=this.container.questionVideoUrl,this.startTimer()):this.alertEmpty()}startTimer(){clearInterval(this.interval),this.time=30,this.interval=setInterval(()=>{this.time>0?this.time--:(clearInterval(this.interval),this.inputValue.value=null,this.showQuestions())},1e3)}alertEmpty(){return(0,a.mG)(this,void 0,void 0,function*(){this.container=[];const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Alert!",message:"No more questions available for now!",backdropDismiss:!1,buttons:[{text:"Okay",handler:()=>{this.router.navigateByUrl("/home")}}]});yield t.present()})}}return t.\u0275fac=function(i){return new(i||t)(c.Y36(s.IN),c.Y36(r.F0),c.Y36(h.K),c.Y36(s.Br),c.Y36(l.eN))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-modal-numeric"]],viewQuery:function(t,i){if(1&t&&c.Gf(d,5),2&t){let t;c.iGM(t=c.CRH())&&(i.inputValue=t.first)}},decls:24,vars:8,consts:[["name","home-outline","slot","end",1,"btn-home",3,"routerLink"],[1,"background-image"],[2,"padding","10px"],[1,"main-container"],[2,"width","-webkit-fill-available"],[2,"float","right"],["src","../../assets/images/clock-smiling-face-animated-clipart.gif",2,"width","60px"],[2,"font-size","xx-large","min-width","40px"],["style","margin: 0 10px 10px 10px;",4,"ngIf"],["style","margin: unset; padding: 5px;",4,"ngIf"],[2,"margin","10px"],[2,"font-size","20px","padding","10px"],["type","tel","placeholder","Your answer here",1,"cusotm-input"],["inputValue",""],[1,"btn-next-wrapper"],["shape","round","fill","outline",1,"btn-submit",2,"margin-right","20px",3,"disabled","click"],["class","btn-next","shape","round",3,"disabled","click",4,"ngIf"],[2,"margin","0 10px 10px 10px"],[3,"src","click"],[2,"margin","unset","padding","5px"],["playinline","","preload","auto","controls","","controlsList","nodownload",3,"poster"],["type","video/mp4",3,"src"],["shape","round",1,"btn-next",3,"disabled","click"]],template:function(t,i){if(1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3),c.qZA(),c._UZ(4,"ion-icon",0),c.qZA(),c.qZA(),c.TgZ(5,"ion-content",1),c.TgZ(6,"div",2),c.TgZ(7,"div",3),c.TgZ(8,"div",4),c.TgZ(9,"ion-item",5),c._UZ(10,"img",6),c.TgZ(11,"ion-label",7),c._uU(12),c.qZA(),c.qZA(),c.qZA(),c.YNc(13,p,2,1,"div",8),c.YNc(14,g,3,2,"ion-card",9),c.TgZ(15,"div",10),c.TgZ(16,"ion-label",11),c._uU(17),c.qZA(),c._UZ(18,"ion-input",12,13),c.qZA(),c.TgZ(20,"div",14),c.TgZ(21,"ion-button",15),c.NdJ("click",function(){return i.closeModal()}),c._uU(22,"Submit"),c.qZA(),c.YNc(23,m,2,1,"ion-button",16),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.MAs(19);c.xp6(3),c.hij("Question ",i.questionNo,""),c.xp6(1),c.Q6J("routerLink","/home"),c.xp6(8),c.Oqu(i.time),c.xp6(1),c.Q6J("ngIf",""!=i.questionImageUrl),c.xp6(1),c.Q6J("ngIf",""!=i.questionVideoUrl),c.xp6(3),c.hij(" ",i.question," "),c.xp6(4),c.Q6J("disabled",""==t.value),c.xp6(2),c.Q6J("ngIf",0!=i.arrayContainer.length)}},directives:[s.Gu,s.sr,s.wd,s.gu,s.YI,r.rH,s.W2,s.Ie,s.Q$,n.O5,s.pK,s.j9,s.YG,s.PM],styles:[".close-wrapper[_ngcontent-%COMP%]{width:30px;text-align:left}.main-container[_ngcontent-%COMP%]{background:#fff;border-radius:10px}.cusotm-input[_ngcontent-%COMP%]{background:#98fb98;height:60px;margin:10px 0}.cusotm-input[_ngcontent-%COMP%], img[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{border-radius:10px}video[_ngcontent-%COMP%]{max-width:100%;max-height:100%;display:inline-block;vertical-align:middle}.play-button[_ngcontent-%COMP%]{position:absolute;color:#fff;left:33%;top:14px}.btn-home[_ngcontent-%COMP%]{margin-right:20px;font-size:x-large}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,o.u5,s.Pc,x]]}),t})()}}]);